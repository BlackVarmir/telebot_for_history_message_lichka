# 🤖 Гібридний Telegram Бот з AI Помічником

Бот для автоматичного збереження повідомлень з Telegram з AI аналізом помилок та зручною клавіатурою.

## ✨ Основні можливості

### 📱 Збереження повідомлень
- ✅ "Збережені повідомлення"
- ✅ Приватні чати
- ✅ Групи (опціонально)
- ✅ Канали (опціонально)

### 💾 Автоматичний бекап
- 📤 Щоденне завантаження на Hetzner Storage Box (23:59)
- 📝 Автоматична відправка логів (23:58)
- 🗑️ Очищення старих логів (30 днів)
- 🧹 Автоматичне очищення старих локальних файлів

### 🤖 AI Помічник
- 🔍 Автоматичний аналіз помилок
- 💡 Пропозиції рішень українською
- 🔧 Генерація виправленого коду
- 📊 Історія аналізів

### ⌨️ Telegram Клавіатура
- 🎯 Швидкий доступ до всіх функцій
- 📊 Інтерактивні меню
- 🔙 Зручна навігація

### 📖 Перегляд повідомлень
- 📄 Пагінація (5 повідомлень на сторінці)
- ⬅️➡️ Навігація між сторінками
- 📥 Завантаження файлів
- 🔍 Детальна інформація про кожне повідомлення

### 🔍 Сканування повідомлень
- 📅 Повне сканування за сьогоднішній день
- 💾 Завантаження ВСІХ пропущених повідомлень
- 💬 Підтримка Збережених та приватних чатів
- ⚡ Оптимізоване для швидкої роботи

---

## 🚀 Швидкий старт

### 1. Встановлення залежностей

```bash
pip install pyrogram python-telegram-bot paramiko apscheduler openai anthropic
```

### 2. Налаштування

Відредагуйте `hybrid_main.py`:

```python
# Telegram Client API
API_ID = "ваш_api_id"
API_HASH = "ваш_api_hash"

# Bot API
BOT_TOKEN = "ваш_bot_token"

# Storage Box
STORAGE_BOX_HOST = "ваш_хост"
STORAGE_BOX_USERNAME = "ваш_username"
STORAGE_BOX_PASSWORD = "ваш_пароль"

# AI (опціонально)
OPENAI_API_KEY = "ваш_openai_key"  # або
ANTHROPIC_API_KEY = "ваш_anthropic_key"
```

### 3. Запуск

```bash
python hybrid_main.py
```

### 4. Використання

1. Відкрийте бота в Telegram
2. Надішліть `/start`
3. Використовуйте кнопки для керування

---

## 📚 Документація

- **[AI_SETUP.md](AI_SETUP.md)** - Налаштування AI помічника
- **[KEYBOARD_GUIDE.md](KEYBOARD_GUIDE.md)** - Керування через клавіатуру
- **[WHATS_NEW.md](WHATS_NEW.md)** - Що нового в версії 2.0

---

## 🎯 Основні функції

### Через клавіатуру

```
┌─────────────┬──────────────────┐
│ 📊 Статус   │ ⚙️ Налаштування  │
├─────────────┼──────────────────┤
│ 💾 Бекап    │ 📂 Історія       │
├─────────────┼──────────────────┤
│ 🤖 AI       │ 📝 Логи          │
│ Помічник    │                  │
├─────────────┼──────────────────┤
│ 🔧 Технічне │ ℹ️ Допомога      │
└─────────────┴──────────────────┘
```

### Через команди

```
/start - Початок роботи
/status - Статус збережених повідомлень
/settings - Налаштування
/backup - Миттєвий бекап
/history - Історія файлів
```

---

## 🤖 AI Помічник

### Підтримувані провайдери

- **OpenAI GPT-4o-mini** - швидко і дешево
- **Anthropic Claude 3.5** - якісно

### Вартість

- ~$1-3/місяць при помірному використанні
- ~$0.001-0.003 за один аналіз

### Налаштування

Дивіться [AI_SETUP.md](AI_SETUP.md)

---

## 📊 Структура файлів

```
project/
├── hybrid_main.py              # Основний файл бота
├── saved_messages_2025-10-08.json  # Повідомлення за день (автоочищення)
├── bot_2025-10-08.log          # Логи за день
├── telegram_client.session     # Сесія Pyrogram
├── AI_SETUP.md                 # Інструкція AI
├── KEYBOARD_GUIDE.md           # Інструкція клавіатури
├── MESSAGES_VIEWER_GUIDE.md    # Інструкція перегляду повідомлень
├── CLEANUP_GUIDE.md            # Інструкція очищення файлів
├── QUICKSTART.md               # Швидкий старт
├── CHANGELOG.md                # Історія змін
├── WHATS_NEW.md                # Що нового
└── README.md                   # Цей файл
```

---

## 🔧 Технічні деталі

### Архітектура

- **Pyrogram Client API** - збір повідомлень
- **python-telegram-bot Bot API** - управління
- **APScheduler** - планування задач
- **Paramiko** - SFTP для бекапу
- **OpenAI/Anthropic** - AI аналіз

### Особливості

- Асинхронна обробка
- Автоматична ротація логів
- Моніторинг помилок
- Інтерактивні меню
- Автоматичне очищення старих файлів (01:00 щодня)

---

## 📝 Логування

### Файли логів

- `bot_2025-10-08.log` - детальні логи
- Автоматична ротація щодня
- Зберігання 30 днів
- Автоматична відправка на сервер

### Консоль

Компактний вивід:
```
💾 Збережені | 11:45:23 | Текст повідомлення...
```

---

## 🔒 Безпека

### Рекомендації

1. ✅ Використовуйте змінні середовища для API ключів
2. ✅ Не публікуйте ключі в GitHub
3. ✅ Регулярно оновлюйте паролі
4. ✅ Обмежте доступ до бота через UUID

### Змінні середовища

```bash
# Windows PowerShell
$env:OPENAI_API_KEY="sk-your-key"
$env:ANTHROPIC_API_KEY="sk-ant-your-key"

# Linux/Mac
export OPENAI_API_KEY="sk-your-key"
export ANTHROPIC_API_KEY="sk-ant-your-key"
```

---

## 🆘 Підтримка

### Проблеми?

1. Перевірте логи: `📝 Логи` → `📋 Останні помилки`
2. AI аналіз: `🤖 AI Помічник` → `🔍 Аналіз помилок`
3. Debug: `🔧 Технічне` → `🗂️ Debug`

### AI не працює?

1. Перевірте API ключі
2. Дивіться [AI_SETUP.md](AI_SETUP.md)
3. Статус: `🤖 AI Помічник` → `⚙️ Налаштування AI`

---

## 📈 Статистика

### Можливості

- Збереження необмеженої кількості повідомлень
- Автоматичний бекап щодня
- AI аналіз помилок
- Історія 30 днів логів

### Продуктивність

- Перевірка "Збережених" кожні 0.5 сек
- Перевірка діалогів кожні 5 сек
- Асинхронна обробка
- Мінімальне навантаження

---

## 🎉 Що нового в 2.1?

- 🤖 AI Помічник для аналізу помилок
- ⌨️ Telegram клавіатура
- 📝 Покращена система логування
- 🔔 Автоматичні сповіщення про помилки
- 📊 Моніторинг помилок
- 📖 Перегляд повідомлень з пагінацією
- 🗑️ Автоматичне очищення старих локальних файлів

Детальніше в [WHATS_NEW.md](WHATS_NEW.md) та [CLEANUP_GUIDE.md](CLEANUP_GUIDE.md)

---

## 📜 Ліцензія

MIT License - використовуйте вільно

---

## 👨‍💻 Автор

**BlackVarmir** + AI Assistant

---

## 🌟 Подяки

- Pyrogram - за чудовий Client API
- python-telegram-bot - за Bot API
- OpenAI/Anthropic - за AI можливості
- Hetzner - за Storage Box

---

## 🚀 Готово!

Насолоджуйтесь використанням бота! 🎉

**Версія:** 2.1.2
**Дата:** 2025-10-13

